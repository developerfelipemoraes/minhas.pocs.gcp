[Fact]
public async Task CreateSignedDownloadUrl_Deve_Conter_Bucket_E_Object()
{
    var facadeMock = new Mock<IGoogleCloudStorageManageService>(MockBehavior.Strict);

    facadeMock
      .Setup(m => m.CreateSignedDownloadUrlAsync(
          It.IsAny<GcsSignedRequest>(),
          It.IsAny<CancellationToken>()))
      .ReturnsAsync(new SignedGoogleCloudStorageResponse { Url = "https://signed.example/bucket-teste/arquivo.txt?sig=abc" });

    var facade = facadeMock.Object;

    var req = new GcsSignedRequest { Bucket = "bucket-teste", ObjectName = "arquivo.txt" };
    var signed = await facade.CreateSignedDownloadUrlAsync(req, CancellationToken.None);

    Assert.NotNull(signed);
    Assert.Contains("bucket-teste", signed.Url);
    Assert.Contains("arquivo.txt", signed.Url);

    facadeMock.Verify(m => m.CreateSignedDownloadUrlAsync(
        It.Is<GcsSignedRequest>(r => r.Bucket == "bucket-teste" && r.ObjectName == "arquivo.txt"),
        It.IsAny<CancellationToken>()), Times.Once);
}
